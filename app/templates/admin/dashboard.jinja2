{% extends 'layout/base.jinja2' %}

{% block content %}
<h1>Admin Dashboard</h1>
<p>Welcome to the admin dashboard.</p>
<div>
    <canvas id="cpuChart"></canvas>
    <canvas id="memoryChart"></canvas>
</div>
{% endblock %}

{% block script %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
    async function fetchData() {
        const response = await fetch('/admin/usage');
        const data = await response.json();
        return data;
    }

    async function updateCharts() {
        const data = await fetchData();
        cpuChart.data.datasets[0].data.push(data.cpu);
        memoryChart.data.datasets[0].data.push(data.memory);
        cpuChart.update();
        memoryChart.update();
    }
</script>
{% endblock script %}